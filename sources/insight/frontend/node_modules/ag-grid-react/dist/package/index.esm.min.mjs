import vs,{Component as ws}from"react";import xe,{forwardRef as Rs,useCallback as et,useContext as yt,useEffect as bs,useImperativeHandle as Es,useMemo as tt,useRef as se,useState as Ae}from"react";import{BaseComponentWrapper as Ps,GridCoreCreator as Ss,VanillaFrameworkOverrides as ks,_combineAttributesAndGridOptions as Fs,_findEnterpriseCoreModule as Ms,_getGridOption as st,_getGridRegisteredModules as xs,_isClientSideRowModel as As,_isServerSideRowModel as Gs,_observeResize as Ds,_processOnChange as Bs,_warn as Nt}from"ag-grid-community";import Re,{forwardRef as Is,useCallback as Os,useContext as Ws,useImperativeHandle as Ts,useLayoutEffect as Ns,useMemo as rt,useRef as Ge,useState as be}from"react";import{_toString as Hs}from"ag-grid-community";import Ht from"react";var q=Ht.createContext({}),Ut=Ht.createContext("default"),Ve=(e,t,s,r)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const i=e.newAgStackInstance();let o,c,a=!1;return i.then(d=>{if(a){t.destroyBean(d);return}o=d,c=o.getGui(),s.appendChild(c),_t(r,o)}),()=>{a=!0,o&&(c?.remove(),t.destroyBean(o),r&&_t(r,void 0))}},_t=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const s=e;s.current=t}};import nt from"react";import Us from"react-dom";var re=(...e)=>e.filter(s=>s!=null&&s!=="").join(" "),ne=class gs{constructor(...t){this.classesMap={};for(const s of t)this.classesMap[s]=!0}setClass(t,s){if(!!this.classesMap[t]==s)return this;const n=new gs;return n.classesMap={...this.classesMap},n.classesMap[t]=s,n}toString(){return Object.keys(this.classesMap).filter(s=>this.classesMap[s]).join(" ")}},De=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,s=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===s()},vt=nt.version?.split(".")[0],Lt=vt==="16"||vt==="17";function _s(){return vt==="19"}var ot=!1;function Ls(e){return ot||setTimeout(()=>ot=!1,0),ot=!0,e()}var ze=(e,t)=>{!Lt&&e&&!ot?Us.flushSync(t):t()},Vs=e=>{Lt?e():nt.startTransition(e)};function zs(e,t,s){return nt.useSyncExternalStore?nt.useSyncExternalStore(e,t):s}function at(e,t,s){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(s||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const r=[],n=[],i=new Map,o=new Map;for(let c=0;c<t.length;c++){const a=t[c];o.set(a.instanceId,a)}for(let c=0;c<e.length;c++){const a=e[c];i.set(a.instanceId,a),o.has(a.instanceId)&&r.push(a)}for(let c=0;c<t.length;c++){const a=t[c],d=a.instanceId;i.has(d)||n.push(a)}return r.length===e.length&&n.length===0?e:r.length===0&&n.length===t.length?t:r.length===0?n:n.length===0?r:[...r,...n]}var Vt=Is((e,t)=>{const{registry:s,context:r}=Ws(q),n=Ge(null),i=Ge(null),o=Ge(null),c=Ge(null),a=Ge(null),d=Ge(),[l,w]=be(),[y,h]=be(),[P,C]=be(),[f,u]=be(()=>new ne),[S,I]=be(()=>new ne("ag-hidden")),[R,m]=be(()=>new ne("ag-hidden")),[W,b]=be(()=>new ne("ag-invisible"));Ts(t,()=>({refresh(){return!1}})),Ns(()=>Ve(l,r,i.current),[l]);const O=Os(N=>{if(n.current=N,!N||r.isDestroyed()){d.current=r.destroyBean(d.current);return}const k={setInnerRenderer:(M,U)=>{w(M),C(U)},setChildCount:M=>h(M),toggleCss:(M,U)=>u(x=>x.setClass(M,U)),setContractedDisplayed:M=>m(U=>U.setClass("ag-hidden",!M)),setExpandedDisplayed:M=>I(U=>U.setClass("ag-hidden",!M)),setCheckboxVisible:M=>b(U=>U.setClass("ag-invisible",!M)),setCheckboxSpacing:M=>b(U=>U.setClass("ag-group-checkbox-spacing",M))},H=s.createDynamicBean("groupCellRendererCtrl",!0);H&&(d.current=r.createBean(H),d.current.init(k,N,o.current,c.current,a.current,Vt,e))},[]),D=rt(()=>`ag-cell-wrapper ${f.toString()}`,[f]),F=rt(()=>`ag-group-expanded ${S.toString()}`,[S]),g=rt(()=>`ag-group-contracted ${R.toString()}`,[R]),v=rt(()=>`ag-group-checkbox ${W.toString()}`,[W]),G=l?.componentFromFramework,V=G?l.componentClass:void 0,p=l==null&&P!=null,B=Hs(P);return Re.createElement("span",{className:D,ref:O,...e.colDef?{}:{role:d.current?.getCellAriaRole()}},Re.createElement("span",{className:F,ref:c}),Re.createElement("span",{className:g,ref:a}),Re.createElement("span",{className:v,ref:o}),Re.createElement("span",{className:"ag-group-value",ref:i},p?B:G?Re.createElement(V,{...l.params}):null),Re.createElement("span",{className:"ag-group-child-count"},y))}),zt=Vt;import{AgPromise as wt}from"ag-grid-community";import jt,{memo as js,useEffect as Ks,useState as $s}from"react";import{createContext as Js}from"react";var je=Js({setMethods:()=>{}}),qs=e=>{const{initialProps:t,addUpdateCallback:s,CustomComponentClass:r,setMethods:n}=e,[{key:i,...o},c]=$s(t);return Ks(()=>{s(a=>c(a))},[]),jt.createElement(je.Provider,{value:{setMethods:n}},jt.createElement(r,{key:i,...o}))},Qs=js(qs);import{createElement as Ys}from"react";import{createPortal as Zs}from"react-dom";import{AgPromise as Rt}from"ag-grid-community";var Xs=0;function Kt(){return`agPortalKey_${++Xs}`}var $t=class{constructor(e,t,s,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=s,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Kt(),this.portalKey=Kt(),this.instanceCreated=this.isStatelessComponent()?Rt.resolve(!1):new Rt(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),s=document.createElement(t||"div");return s.classList.add("ag-react-container"),e.reactContainer=s,s}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const s=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!s){setTimeout(()=>this.callMethod(e,t));return}const r=s[e];if(r)return r.apply(s,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Rt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Zs(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return Ys(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const s=this[`${e}Component`];if(!this.suppressFallbackMethods&&s)return s.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function ct(e,t,s){for(const r of e){const n=t[r];n&&(s[r]=n)}}var oe=class extends $t{constructor(){super(...arguments),this.awaitUpdateCallback=new wt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Qs}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:s=>this.setMethods(s),addUpdateCallback:s=>{this.updateCallback=()=>(s(this.getProps()),new wt(r=>{setTimeout(()=>{r()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ct(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new wt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},er=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},tr=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},sr=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},rr=class extends oe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:s,shake:r}=this;return e.label=t,e.icon=s,e.shake=r,e}};import{AgPromise as Jt}from"ag-grid-community";var nr=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Jt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new Jt(s=>{this.resolveFilterPassCallback=s});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}};import{AgPromise as or}from"ag-grid-community";var ar=class extends oe{constructor(){super(...arguments),this.awaitSetMethodsCallback=new or(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};import{AgPromise as cr}from"ag-grid-community";function qt(e,t){e.parentFilterInstance(s=>{(s.setModel(t)||cr.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var ir=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=s=>this.updateModel(s)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),qt(this.floatingFilterParams,e)}},lr=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),qt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},ur=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},dr=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},pr=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},mr=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},hr=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};import{AgPromise as fr,_warn as Cr}from"ag-grid-community";function gr(e,t){(e?.getInstance?.()??fr.resolve(void 0)).then(r=>t(r))}function it(){Cr(231)}var yr=1e3,vr=class{constructor(e,t,s){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=s||yr}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,s){this.portals=[...this.portals,e],this.waitForInstance(t,s),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,s=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-s>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){ze(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,s)})}}};import lt,{useContext as Qt,useRef as bt}from"react";import{_areEqual as Yt}from"ag-grid-community";var Et=lt.createContext([]),Pt=lt.createContext(void 0);function wr({modules:e,licenseKey:t,children:s}){const r=Qt(Et),n=Qt(Pt),i=bt(e),o=bt(r),c=bt([...r,...e]),a=!Yt(o.current,r);a&&(o.current=r);const d=!Yt(i.current,e);d&&(i.current=e),(a||d)&&(c.current=[...o.current,...i.current]);const l=t??n;return lt.createElement(Et.Provider,{value:c.current},lt.createElement(Pt.Provider,{value:l},s))}import Ke,{memo as Rr,useCallback as ut,useEffect as br,useMemo as St,useRef as Be,useState as Ee}from"react";import{GridCtrl as Er}from"ag-grid-community";import $e,{memo as Pr,useCallback as Sr,useContext as kr,useMemo as ie,useRef as de,useState as Q}from"react";import{CssClassManager as Fr,FakeHScrollComp as Mr,FakeVScrollComp as xr,GridBodyCtrl as Ar,_observeResize as Gr,_setAriaColCount as Dr,_setAriaRowCount as Br}from"ag-grid-community";import dt,{memo as Ir,useCallback as Or,useContext as Wr,useMemo as Zt,useRef as Xt,useState as es}from"react";import{GridHeaderCtrl as Tr}from"ag-grid-community";import Je,{memo as Nr,useCallback as Hr,useContext as Ur,useRef as kt,useState as ts}from"react";import{HeaderRowContainerCtrl as _r}from"ag-grid-community";import pt,{memo as Lr,useCallback as ss,useContext as Vr,useMemo as Ft,useRef as Mt,useState as mt}from"react";import{_EmptyBean as zr}from"ag-grid-community";import qe,{memo as jr,useCallback as Kr,useContext as $r,useEffect as Jr,useLayoutEffect as qr,useMemo as Qr,useRef as Ie,useState as rs}from"react";import{CssClassManager as Yr,_EmptyBean as Zr,_removeAriaSort as Xr,_setAriaSort as en}from"ag-grid-community";var tn=({ctrl:e})=>{const t=e.isAlive(),{context:s}=$r(q),[r,n]=rs(),[i,o]=rs(),c=Ie(),a=Ie(null),d=Ie(null),l=Ie(null),w=Ie(),y=Ie();t&&!y.current&&(y.current=new Yr(()=>a.current));const h=Kr(u=>{if(a.current=u,!u||!e.isAlive()||s.isDestroyed()){c.current=s.destroyBean(c.current);return}c.current=s.createBean(new Zr);const S=()=>{const R=e.getSelectAllGui();R&&(d.current?.insertAdjacentElement("afterend",R),c.current.addDestroyFunc(()=>R.remove()))},I={setWidth:R=>{a.current&&(a.current.style.width=R)},toggleCss:(R,m)=>y.current.toggleCss(R,m),setUserStyles:R=>o(R),setAriaSort:R=>{a.current&&(R?en(a.current,R):Xr(a.current))},setUserCompDetails:R=>n(R),getUserCompInstance:()=>w.current||void 0,refreshSelectAllGui:S,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(I,u,d.current,l.current,c.current),S()},[]);qr(()=>Ve(r,s,l.current,w),[r]),Jr(()=>{e.setDragSource(a.current)},[r]);const P=Qr(()=>!!(r?.componentFromFramework&&De(r.componentClass)),[r]),C=r?.componentFromFramework,f=r?.componentClass;return qe.createElement("div",{ref:h,style:i,className:"ag-header-cell",role:"columnheader"},qe.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),qe.createElement("div",{ref:l,className:"ag-header-cell-comp-wrapper",role:"presentation"},C?P?qe.createElement(f,{...r.params}):qe.createElement(f,{...r.params,ref:w}):null))},sn=jr(tn);import Pe,{memo as rn,useCallback as nn,useContext as on,useEffect as an,useLayoutEffect as cn,useMemo as Oe,useRef as Se,useState as ve}from"react";import{AgPromise as ln,_EmptyBean as un}from"ag-grid-community";var dn=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},pn=({ctrl:e})=>{const{context:t,gos:s}=on(q),[r,n]=ve(),[i,o]=ve(()=>new ne("ag-header-cell","ag-floating-filter")),[c,a]=ve(()=>new ne),[d,l]=ve(()=>new ne("ag-floating-filter-button","ag-hidden")),[w,y]=ve("false"),[h,P]=ve(),[,C]=ve(1),f=Se(),u=Se(null),S=Se(null),I=Se(null),R=Se(null),m=Se(),W=Se(),b=M=>{M!=null&&m.current?.(M)},O=nn(M=>{if(u.current=M,!M||!e.isAlive()||t.isDestroyed()){f.current=t.destroyBean(f.current);return}f.current=t.createBean(new un),W.current=new ln(x=>{m.current=x});const U={toggleCss:(x,T)=>o($=>$.setClass(x,T)),setUserStyles:x=>n(x),addOrRemoveBodyCssClass:(x,T)=>a($=>$.setClass(x,T)),setButtonWrapperDisplayed:x=>{l(T=>T.setClass("ag-hidden",!x)),y(x?"false":"true")},setWidth:x=>{u.current&&(u.current.style.width=x)},setCompDetails:x=>P(x),getFloatingFilterComp:()=>W.current?W.current:null,setMenuIcon:x=>R.current?.appendChild(x)};e.setComp(U,M,R.current,S.current,f.current)},[]);cn(()=>Ve(h,t,S.current,b),[h]);const D=Oe(()=>i.toString(),[i]),F=Oe(()=>c.toString(),[c]),g=Oe(()=>d.toString(),[d]),v=Oe(()=>!!(h&&h.componentFromFramework&&De(h.componentClass)),[h]),G=Oe(()=>s.get("reactiveCustomComponents"),[]),V=Oe(()=>s.get("enableFilterHandlers"),[]),[p,B]=ve();an(()=>{if(h?.componentFromFramework)if(G){const M=V?dn:ir,U=new M(h.params,()=>C(x=>x+1));b(U),B(U)}else it()},[h]);const N=p?.getProps(),k=h?.componentFromFramework,H=h?.componentClass;return Pe.createElement("div",{ref:O,style:r,className:D,role:"gridcell"},Pe.createElement("div",{ref:S,className:F,role:"presentation"},k?G?N&&Pe.createElement(je.Provider,{value:{setMethods:M=>p.setMethods(M)}},Pe.createElement(H,{...N})):Pe.createElement(H,{...h.params,ref:v?()=>{}:b}):null),Pe.createElement("div",{ref:I,"aria-hidden":w,className:g,role:"presentation"},Pe.createElement("button",{ref:R,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},mn=rn(pn);import Qe,{memo as hn,useCallback as fn,useContext as Cn,useEffect as gn,useLayoutEffect as yn,useMemo as xt,useRef as Ye,useState as We}from"react";import{_EmptyBean as vn}from"ag-grid-community";var wn=({ctrl:e})=>{const{context:t}=Cn(q),[s,r]=We(),[n,i]=We(()=>new ne),[o,c]=We(()=>new ne),[a,d]=We("false"),[l,w]=We(),[y,h]=We(),P=Ye(),C=Ye(null),f=Ye(null),u=Ye(null),S=Ye(),I=fn(D=>{if(C.current=D,!D||!e.isAlive()||t.isDestroyed()){P.current=t.destroyBean(P.current);return}P.current=t.createBean(new vn);const F={setWidth:g=>{C.current&&(C.current.style.width=g)},toggleCss:(g,v)=>i(G=>G.setClass(g,v)),setUserStyles:g=>r(g),setHeaderWrapperHidden:g=>{const v=u.current;v&&(g?v.style.setProperty("display","none"):v.style.removeProperty("display"))},setHeaderWrapperMaxHeight:g=>{const v=u.current;v&&(g!=null?v.style.setProperty("max-height",`${g}px`):v.style.removeProperty("max-height"),v.classList.toggle("ag-header-cell-comp-wrapper-limited-height",g!=null))},setUserCompDetails:g=>h(g),setResizableDisplayed:g=>{c(v=>v.setClass("ag-hidden",!g)),d(g?"false":"true")},setAriaExpanded:g=>w(g),getUserCompInstance:()=>S.current||void 0};e.setComp(F,D,f.current,u.current,P.current)},[]);yn(()=>Ve(y,t,u.current),[y]),gn(()=>{C.current&&e.setDragSource(C.current)},[y]);const R=xt(()=>!!(y?.componentFromFramework&&De(y.componentClass)),[y]),m=xt(()=>"ag-header-group-cell "+n.toString(),[n]),W=xt(()=>"ag-header-cell-resize "+o.toString(),[o]),b=y?.componentFromFramework,O=y?.componentClass;return Qe.createElement("div",{ref:I,style:s,className:m,role:"columnheader","aria-expanded":l},Qe.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},b?R?Qe.createElement(O,{...y.params}):Qe.createElement(O,{...y.params,ref:S}):null),Qe.createElement("div",{ref:f,"aria-hidden":a,className:W}))},Rn=hn(wn),bn=({ctrl:e})=>{const{gos:t,context:s}=Vr(q),{topOffset:r,rowHeight:n}=Ft(()=>e.getTopAndHeight(),[]),i=Ft(()=>t.get("tabIndex"),[]),[o,c]=mt(()=>e.getAriaRowIndex()),a=e.headerRowClass,[d,l]=mt(()=>n+"px"),[w,y]=mt(()=>r+"px"),h=Mt(null),[P,C]=mt(()=>e.getUpdatedHeaderCtrls()),f=Mt(),u=Mt(null),S=ss(m=>{if(u.current=m,!m||!e.isAlive()||s.isDestroyed()){f.current=s.destroyBean(f.current);return}f.current=s.createBean(new zr);const W={setHeight:b=>l(b),setTop:b=>y(b),setHeaderCtrls:(b,O,D)=>{const F=h.current,g=at(F,b,O);g!==F&&(h.current=g,ze(D,()=>C(g)))},setWidth:b=>{u.current&&(u.current.style.width=b)},setRowIndex:b=>{c(b)}};e.setComp(W,f.current,!1)},[]),I=Ft(()=>({height:d,top:w}),[d,w]),R=ss(m=>{switch(e.type){case"group":return pt.createElement(Rn,{ctrl:m,key:m.instanceId});case"filter":return pt.createElement(mn,{ctrl:m,key:m.instanceId});default:return pt.createElement(sn,{ctrl:m,key:m.instanceId})}},[]);return pt.createElement("div",{ref:S,className:a,role:"row",style:I,tabIndex:i,"aria-rowindex":o},P.map(R))},En=Lr(bn),Pn=({pinned:e})=>{const[t,s]=ts(!0),[r,n]=ts([]),{context:i}=Ur(q),o=kt(null),c=kt(null),a=kt(),d=e==="left",l=e==="right",w=!d&&!l,y=Hr(C=>{if(o.current=C,!C||i.isDestroyed()){a.current=i.destroyBean(a.current);return}a.current=i.createBean(new _r(e));const f={setDisplayed:s,setCtrls:u=>n(u),setCenterWidth:u=>{c.current&&(c.current.style.width=u)},setViewportScrollLeft:u=>{o.current&&(o.current.scrollLeft=u)},setPinnedContainerWidth:u=>{o.current&&(o.current.style.width=u,o.current.style.minWidth=u,o.current.style.maxWidth=u)}};a.current.setComp(f,o.current)},[]),h=t?"":"ag-hidden",P=()=>r.map(C=>Je.createElement(En,{ctrl:C,key:C.instanceId}));return d?Je.createElement("div",{ref:y,className:"ag-pinned-left-header "+h,"aria-hidden":!t,role:"rowgroup"},P()):l?Je.createElement("div",{ref:y,className:"ag-pinned-right-header "+h,"aria-hidden":!t,role:"rowgroup"},P()):w?Je.createElement("div",{ref:y,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},Je.createElement("div",{ref:c,className:"ag-header-container",role:"presentation"},P())):null},At=Nr(Pn),Sn=()=>{const[e,t]=es(()=>new ne),[s,r]=es(),{context:n}=Wr(q),i=Xt(null),o=Xt(),c=Or(l=>{if(i.current=l,!l||n.isDestroyed()){o.current=n.destroyBean(o.current);return}o.current=n.createBean(new Tr);const w={toggleCss:(y,h)=>t(P=>P.setClass(y,h)),setHeightAndMinHeight:y=>r(y)};o.current.setComp(w,l,l)},[]),a=Zt(()=>"ag-header "+e.toString(),[e]),d=Zt(()=>({height:s,minHeight:s}),[s]);return dt.createElement("div",{ref:c,className:a,style:d,role:"presentation"},dt.createElement(At,{pinned:"left"}),dt.createElement(At,{pinned:null}),dt.createElement(At,{pinned:"right"}))},kn=Ir(Sn);import{useEffect as Fn}from"react";var Mn=(e,t)=>{Fn(()=>{const s=t.current;if(s){const r=s.parentElement;if(r){const n=document.createComment(e);return r.insertBefore(n,s),()=>{n.remove()}}}},[e])},ke=Mn;import Ze,{memo as xn,useCallback as Te,useContext as An,useMemo as ht,useRef as fe,useState as ns}from"react";import{RowContainerCtrl as Gn,_getRowContainerClass as Dn,_getRowContainerOptions as Bn,_getRowSpanContainerClass as In,_getRowViewportClass as On}from"ag-grid-community";import ft,{memo as Wn,useCallback as os,useContext as as,useEffect as cs,useLayoutEffect as Tn,useMemo as is,useRef as pe,useState as Ce}from"react";import{CssClassManager as Nn,_EmptyBean as Hn}from"ag-grid-community";import me,{Suspense as Un,memo as _n,useCallback as Ne,useContext as Ln,useLayoutEffect as Gt,useMemo as Ct,useRef as ae,useState as ge}from"react";import{CssClassManager as Vn,_EmptyBean as zn,_removeFromParent as jn}from"ag-grid-community";import{AgPromise as Kn}from"ag-grid-community";var $n=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Kn(s=>{this.resolveInstanceCreated=s}),this.onValueChange=s=>this.updateValue(s),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}};import He from"react";import{memo as Jn,useContext as qn,useLayoutEffect as Qn,useState as Yn}from"react";import{createPortal as Zn}from"react-dom";import{_getActiveDomElement as Xn}from"ag-grid-community";import{useEffect as eo,useRef as gt,useState as to}from"react";var so=e=>{const t=gt(e),s=gt(),r=gt(!1),n=gt(!1),[,i]=to(0);r.current&&(n.current=!0),eo(()=>(r.current||(s.current=t.current(),r.current=!0),i(o=>o+1),()=>{n.current&&s.current?.()}),[])},ro=e=>{const[t,s]=Yn(),r=qn(q),{context:n,popupSvc:i,gos:o,editSvc:c}=r,{editDetails:a,cellCtrl:d,eParentCell:l}=e;return so(()=>{const{compDetails:w}=a,y=o.get("stopEditingWhenCellsLoseFocus");let h,P;if(!n.isDestroyed()){P=n.createBean(c.createPopupEditorWrapper(w.params));const C=P.getGui();if(e.jsChildComp){const m=e.jsChildComp.getGui();m&&C.appendChild(m)}const{column:f,rowNode:u}=d,S={column:f,rowNode:u,type:"popupCellEditor",eventSource:l,ePopup:C,position:a.popupPosition,keepWithinBounds:!0},I=i?.positionPopupByComponent.bind(i,S),R=i?.addPopup({modal:y,eChild:C,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:l,positionCallback:I,ariaOwns:l});h=R?R.hideFunc:void 0,s(P),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),n.destroyBean(P)}}),Qn(()=>()=>{d.isCellFocused()&&t?.getGui().contains(Xn(r))&&l.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?Zn(e.wrappedContent,t.getGui()):null},ls=Jn(ro),no=(e,t,s)=>{const{compProxy:r}=e;s(r);const n=r.getProps(),i=De(t);return He.createElement(je.Provider,{value:{setMethods:o=>r.setMethods(o)}},i?He.createElement(t,{...n}):He.createElement(t,{...n,ref:o=>r.setRef(o)}))},us=(e,t,s)=>e.compProxy?no(e,t,s):He.createElement(t,{...e.compDetails.params,ref:s}),oo=(e,t,s,r,n)=>{const i=e.compDetails,o=i.componentClass,c=i.componentFromFramework&&!e.popup,a=i.componentFromFramework&&e.popup,d=!i.componentFromFramework&&e.popup;return c?us(e,o,t):a?He.createElement(ls,{editDetails:e,cellCtrl:r,eParentCell:s,wrappedContent:us(e,o,t)}):d&&n?He.createElement(ls,{editDetails:e,cellCtrl:r,eParentCell:s,jsChildComp:n}):null};import{useCallback as ao,useContext as co,useEffect as ds}from"react";var io=(e,t,s,r,n,i,o=!1)=>{const{context:c}=co(q),a=ao(()=>{const d=n.current;if(!d)return;const l=d.getGui();l&&l.parentElement&&l.remove(),c.destroyBean(d),n.current=void 0},[]);ds(()=>{const d=e!=null&&!o,l=e?.compDetails&&!e.compDetails.componentFromFramework,w=t&&s==null;if(!(d&&l&&!w)){a();return}const h=e.compDetails;if(n.current){const C=n.current,u=C.refresh!=null&&e.force==!1?C.refresh(h.params):!1;if(u===!0||u===void 0)return;a()}h.newAgStackInstance().then(C=>{if(!C)return;const f=C.getGui();if(!f)return;(t?s:i.current).appendChild(f),n.current=C})},[e,t,r,o]),ds(()=>a,[])},ps=io;import Dt,{useMemo as lo,useRef as uo}from"react";var po=({cellCtrl:e,parent:t})=>{const s=uo(),r=lo(()=>{const{loadingComp:n}=e.getDeferLoadingCellRenderer();return n?{value:void 0,compDetails:n,force:!1}:void 0},[e]);if(ps(r,!1,void 0,1,s,t),r?.compDetails?.componentFromFramework){const n=r.compDetails.componentClass;return Dt.createElement(n,{...r.compDetails.params})}return Dt.createElement(Dt.Fragment,null)},mo=({cellCtrl:e,printLayout:t,editingCell:s})=>{const r=Ln(q),{context:n}=r,{column:{colIdSanitised:i},instanceId:o}=e,c=ae(),[a,d]=ge(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[l,w]=ge(),[y,h]=ge(1),[P,C]=ge(),[f,u]=ge(!1),[S,I]=ge(!1),[R,m]=ge(!1),[W,b]=ge(),O=Ct(()=>e.isForceWrapper(),[e]),D=Ct(()=>e.getCellAriaRole(),[e]),F=ae(null),g=ae(null),v=ae(null),G=ae(),V=ae(),p=ae(),B=ae([]),N=ae(),k=ae(),[H,M]=ge(0),U=Ne(A=>{k.current=A,M(_=>_+1)},[]),x=a!=null&&(f||R||S)&&(l==null||!!l.popup),T=O||x,$=Ct(()=>e.getCellValueClass(),[e]),le=Ne(A=>{if(V.current=A,A){const _=A.isCancelBeforeStart&&A.isCancelBeforeStart();setTimeout(()=>{_?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(A))})}},[e]),Y=ae();Y.current||(Y.current=new Vn(()=>F.current));const Fe=!!l&&!l.popup;ps(a,T,k.current,H,G,F,Fe);const Me=ae();Gt(()=>{const A=Me.current,_=a;if(Me.current=a,A==null||A.compDetails==null||_==null||_.compDetails==null)return;N.current?.refreshVisibility();const J=A.compDetails,K=_.compDetails;if(J.componentClass!=K.componentClass||v.current?.refresh==null)return;v.current.refresh(K.params)!=!0&&h(z=>z+1)},[a]),Gt(()=>{if(!(l&&!l.compDetails.componentFromFramework)||n.isDestroyed())return;const _=l.compDetails,J=l.popup===!0,K=_.newAgStackInstance();return K.then(E=>{if(!E)return;const z=E.getGui();le(E),J||((O?p:F).current?.appendChild(z),E.afterGuiAttached?.()),b(E)}),()=>{K.then(E=>{const z=E.getGui();e.disableEditorTooltipFeature(),n.destroyBean(E),le(void 0),b(void 0),z?.remove()})}},[l]);const _e=Ne(A=>{if(p.current=A,!A||n.isDestroyed()||!e.isAlive()){const K=B.current;B.current=[];for(const E of K)E();return}let _;const J=K=>{K&&(A.insertAdjacentElement("afterbegin",K.getGui()),B.current.push(()=>{jn(K.getGui()),n.destroyBean(K),N.current===_&&(N.current=void 0)}))};f&&J(e.createSelectionCheckbox()),R&&J(e.createDndSource()),S&&(_=e.createRowDragComp(),N.current=_,_&&(J(_),_.refreshVisibility()))},[e,n,R,S,f]),L=Ne(()=>{const A=!e.isCellSpanning()||g.current,_=F.current;if(!_||!A||!e||!e.isAlive()||n.isDestroyed()){c.current=n.destroyBean(c.current);return}c.current=n.createBean(new zn);const J={toggleCss:(E,z)=>Y.current.toggleCss(E,z),setUserStyles:E=>C(E),getFocusableElement:()=>F.current,setIncludeSelection:E=>u(E),setIncludeRowDrag:E=>I(E),setIncludeDndSource:E=>m(E),getCellEditor:()=>V.current??null,getCellRenderer:()=>v.current??G.current,getParentOfValue:()=>k.current??p.current??F.current,setRenderDetails:(E,z,X)=>{const ue=()=>{d(ee=>ee?.compDetails!==E||ee?.value!==z||ee?.force!==X?{value:z,compDetails:E,force:X}:ee)};if(E?.params?.deferRender&&!e.rowNode.group){const{loadingComp:ee,onReady:Le}=e.getDeferLoadingCellRenderer();if(ee){d({value:void 0,compDetails:ee,force:!1}),Le.then(()=>Vs(ue));return}}ue()},setEditDetails:(E,z,X,ue)=>{if(E){let ee;E.componentFromFramework&&(ue?ee=new $n(E.params,()=>h(Le=>Le+1)):it()),w({compDetails:E,popup:z,popupPosition:X,compProxy:ee}),z||d(void 0)}else e.hasBrowserFocus()&&J.getFocusableElement().focus({preventScroll:!0}),V.current=void 0,w(void 0)},refreshEditStyles:(E,z)=>{if(!F.current)return;const{current:X}=Y;X.toggleCss("ag-cell-value",!T),X.toggleCss("ag-cell-inline-editing",!!E&&!z),X.toggleCss("ag-cell-popup-editing",!!E&&!!z),X.toggleCss("ag-cell-not-inline-editing",!E||!!z)}},K=p.current||void 0;e.setComp(J,_,g.current??void 0,K,t,s,c.current)},[]),we=Ne(A=>{F.current=A,L()},[]),Z=Ne(A=>{g.current=A,L()},[]),ce=Ct(()=>!!(a?.compDetails?.componentFromFramework&&De(a.compDetails.componentClass)),[a]);Gt(()=>{if(!F.current)return;const{current:A}=Y;A.toggleCss("ag-cell-value",!T),A.toggleCss("ag-cell-inline-editing",!!l&&!l.popup),A.toggleCss("ag-cell-popup-editing",!!l&&!!l.popup),A.toggleCss("ag-cell-not-inline-editing",!l||!!l.popup)});const he=()=>{const{compDetails:A,value:_}=a;if(!A)return _?.toString?.()??_;if(A.componentFromFramework){const J=A.componentClass;return me.createElement(Un,{fallback:me.createElement(po,{cellCtrl:e,parent:F})},ce?me.createElement(J,{...A.params,key:y}):me.createElement(J,{...A.params,key:y,ref:v}))}},ye=()=>{const A=()=>a==null?null:T?me.createElement("span",{role:"presentation",id:`cell-${o}`,className:$,ref:U},he()):he(),_=J=>oo(J,le,F.current,e,W);return l!=null?l.popup?me.createElement(me.Fragment,null,A(),_(l)):_(l):A()},Xe=()=>me.createElement("div",{ref:we,style:P,role:D,"col-id":i},T?me.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:_e},ye()):ye());return e.isCellSpanning()?me.createElement("div",{ref:Z,className:"ag-spanned-cell-wrapper",role:"presentation"},Xe()):Xe()},ho=_n(mo),fo=({rowCtrl:e,containerType:t})=>{const{context:s,gos:r,editSvc:n}=as(q),i=as(Ut)==="default",o=pe(),c=pe(e.getDomOrder()),a=e.isFullWidth(),d=e.rowNode.displayed,[l,w]=Ce(()=>d?e.rowNode.getRowIndexString():null),[y,h]=Ce(()=>e.rowId),[P,C]=Ce(()=>e.businessKey),[f,u]=Ce(()=>e.rowStyles),S=pe(null),[I,R]=Ce(()=>null),[m,W]=Ce(),[b,O]=Ce(()=>d?e.getInitialRowTop(t):void 0),[D,F]=Ce(()=>d?e.getInitialTransform(t):void 0),g=pe(null),v=pe(),G=pe(),V=pe(!1),[p,B]=Ce(0);cs(()=>{if(V.current||!m||p>10)return;const L=g.current?.firstChild;L?(e.setupDetailRowAutoHeight(L),V.current=!0):B(we=>we+1)},[m,p]);const N=pe();N.current||(N.current=new Nn(()=>g.current));const k=pe(()=>{}),H=os(L=>(k.current=L,()=>{k.current=()=>{}}),[]),M=zs(H,()=>S.current,[]),U=i?M:I,x=os(L=>{if(g.current=L,o.current=L?s.createBean(new Hn):s.destroyBean(o.current),!L){e.unsetComp(t);return}if(!e.isAlive()||s.isDestroyed())return;const we={setTop:O,setTransform:F,toggleCss:(Z,ce)=>N.current.toggleCss(Z,ce),setDomOrder:Z=>c.current=Z,setRowIndex:w,setRowId:h,setRowBusinessKey:C,setUserStyles:u,setCellCtrls:(Z,ce)=>{const he=S.current,ye=at(he,Z,c.current);ye!==he&&(S.current=ye,i?k.current():ze(ce,()=>R(ye)))},showFullWidth:Z=>{G.current=Z.params,W(Z)},getFullWidthCellRenderer:()=>v.current,getFullWidthCellRendererParams:()=>G.current,refreshFullWidth:Z=>{const ce=Z();return G.current=ce,Fe.current?(W(he=>({...he,params:ce})),!0):!v.current||!v.current.refresh?!1:v.current.refresh(ce)}};e.setComp(we,L,t,o.current)},[]);Tn(()=>Ve(m,s,g.current,v),[m]);const T=is(()=>{const L={top:b,transform:D};return Object.assign(L,f),L},[b,D,f]),$=a&&m?.componentFromFramework,le=!a&&U!=null,Y=is(()=>!!(m?.componentFromFramework&&De(m.componentClass)),[m]),Fe=pe(!1);cs(()=>{Fe.current=Y&&!!m&&!!r.get("reactiveCustomComponents")},[Y,m]);const Me=()=>U?.map(L=>ft.createElement(ho,{cellCtrl:L,editingCell:n?.isEditing(L,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:L.instanceId})),_e=()=>{const L=m.componentClass;return Y?ft.createElement(L,{...m.params}):ft.createElement(L,{...m.params,ref:v})};return ft.createElement("div",{ref:x,role:"row",style:T,"row-index":l,"row-id":y,"row-business-key":P},le?Me():$?_e():null)},ms=Wn(fo),Co=({name:e})=>{const{context:t,gos:s}=An(q),r=ht(()=>Bn(e),[e]),n=fe(null),i=fe(null),o=fe(null),c=fe([]),a=fe([]),[d,l]=ns(()=>[]),w=!!s.get("enableCellSpan")&&!!r.getSpannedRowCtrls,y=fe([]),h=fe([]),[P,C]=ns(()=>[]),f=fe(!1),u=fe(),S=ht(()=>re("ag-viewport",On(e)),[e]),I=ht(()=>re(Dn(e)),[e]),R=ht(()=>re("ag-spanning-container",In(e)),[e]),m=r.type==="center"||w,W=m?n:i;ke(" AG Row Container "+e+" ",W);const b=Te(()=>{const p=!m||n.current!=null,B=i.current!=null,N=!w||o.current!=null;return p&&B&&N},[]),O=Te(()=>n.current==null&&i.current==null&&o.current==null,[]),D=Te(()=>{if(O()&&(u.current=t.destroyBean(u.current)),!t.isDestroyed()&&b()){const p=k=>{const H=at(a.current,c.current,f.current);H!==a.current&&(a.current=H,ze(k,()=>l(H)))},B=k=>{const H=at(h.current,y.current,f.current);H!==h.current&&(h.current=H,ze(k,()=>C(H)))},N={setHorizontalScroll:k=>{n.current&&(n.current.scrollLeft=k)},setViewportHeight:k=>{n.current&&(n.current.style.height=k)},setRowCtrls:({rowCtrls:k,useFlushSync:H})=>{const M=!!H&&c.current.length>0&&k.length>0;c.current=k,p(M)},setSpannedRowCtrls:(k,H)=>{const M=!!H&&y.current.length>0&&k.length>0;y.current=k,B(M)},setDomOrder:k=>{f.current!=k&&(f.current=k,p(!1))},setContainerWidth:k=>{i.current&&(i.current.style.width=k)},setOffsetTop:k=>{i.current&&(i.current.style.transform=`translateY(${k})`)}};u.current=t.createBean(new Gn(e)),u.current.setComp(N,i.current,o.current??void 0,n.current)}},[b,O]),F=Te(p=>{i.current=p,D()},[D]),g=Te(p=>{o.current=p,D()},[D]),v=Te(p=>{n.current=p,D()},[D]),G=()=>Ze.createElement("div",{className:I,ref:F,role:m?"presentation":"rowgroup"},d.map(p=>Ze.createElement(ms,{rowCtrl:p,containerType:r.type,key:p.instanceId})));if(!m)return G();const V=()=>Ze.createElement("div",{className:R,ref:g,role:"presentation"},P.map(p=>Ze.createElement(ms,{rowCtrl:p,containerType:r.type,key:p.instanceId})));return Ze.createElement("div",{className:S,ref:v,role:"rowgroup"},G(),w?V():null)},go=xn(Co),yo=()=>{const e=kr(q),{context:t,overlays:s}=e,[r,n]=Q(""),[i,o]=Q(0),[c,a]=Q(0),[d,l]=Q("0px"),[w,y]=Q("0px"),[h,P]=Q("100%"),[C,f]=Q("0px"),[u,S]=Q("0px"),[I,R]=Q("100%"),[m,W]=Q(!0),[b,O]=Q(!0),[D,F]=Q(null),[g,v]=Q(""),[G,V]=Q(null),[p,B]=Q("ag-layout-normal"),N=de();N.current||(N.current=new Fr(()=>k.current));const k=de(null),H=de(null),M=de(null),U=de(null),x=de(null),T=de(null),$=de(null),le=de([]),Y=de([]);ke(" AG Grid Body ",k),ke(" AG Pinned Top ",H),ke(" AG Sticky Top ",M),ke(" AG Middle ",T),ke(" AG Pinned Bottom ",$);const Fe=Sr(E=>{if(k.current=E,!E||t.isDestroyed()){le.current=t.destroyBeans(le.current);for(const j of Y.current)j();Y.current=[];return}const z=(j,te)=>{j.appendChild(te),Y.current.push(()=>te.remove())},X=j=>{const te=t.createBean(new j);return le.current.push(te),te},ue=(j,te,ys)=>{z(j,document.createComment(ys)),z(j,X(te).getGui())};ue(E,Mr," AG Fake Horizontal Scroll ");const ee=s?.getOverlayWrapperCompClass();ee&&ue(E,ee," AG Overlay Wrapper "),x.current&&ue(x.current,xr," AG Fake Vertical Scroll ");const Le={setRowAnimationCssOnBodyViewport:n,setColumnCount:j=>{k.current&&Dr(k.current,j)},setRowCount:j=>{k.current&&Br(k.current,j)},setTopHeight:o,setBottomHeight:a,setStickyTopHeight:l,setStickyTopTop:y,setStickyTopWidth:P,setTopInvisible:W,setBottomInvisible:O,setColumnMovingCss:(j,te)=>N.current.toggleCss(j,te),updateLayoutClasses:B,setAlwaysVerticalScrollClass:F,setPinnedTopBottomOverflowY:v,setCellSelectableCss:(j,te)=>V(te?j:null),setBodyViewportWidth:j=>{T.current&&(T.current.style.width=j)},registerBodyViewportResizeListener:j=>{if(T.current){const te=Gr(e,T.current,j);Y.current.push(()=>te())}},setStickyBottomHeight:f,setStickyBottomBottom:S,setStickyBottomWidth:R,setGridRootRole:j=>E.setAttribute("role",j)},Tt=t.createBean(new Ar);le.current.push(Tt),Tt.setComp(Le,E,T.current,H.current,$.current,M.current,U.current)},[]),Me=ie(()=>re("ag-root","ag-unselectable",p),[p]),_e=ie(()=>re("ag-body-viewport",r,p,D,G),[r,p,D,G]),L=ie(()=>re("ag-body",p),[p]),we=ie(()=>re("ag-floating-top",m?"ag-invisible":null,G),[G,m]),Z=ie(()=>re("ag-sticky-top",G),[G]),ce=ie(()=>re("ag-sticky-bottom",C==="0px"?"ag-invisible":null,G),[G,C]),he=ie(()=>re("ag-floating-bottom",b?"ag-invisible":null,G),[G,b]),ye=ie(()=>({height:i,minHeight:i,overflowY:g}),[i,g]),Xe=ie(()=>({height:d,top:w,width:h}),[d,w,h]),A=ie(()=>({height:C,bottom:u,width:I}),[C,u,I]),_=ie(()=>({height:c,minHeight:c,overflowY:g}),[c,g]),J=E=>$e.createElement(go,{name:E,key:`${E}-container`}),K=({section:E,children:z,className:X,style:ue})=>$e.createElement("div",{ref:E,className:X,role:"presentation",style:ue},z.map(J));return $e.createElement("div",{ref:Fe,className:Me},$e.createElement(kn,null),K({section:H,className:we,style:ye,children:["topLeft","topCenter","topRight","topFullWidth"]}),$e.createElement("div",{className:L,ref:x,role:"presentation"},K({section:T,className:_e,children:["left","center","right","fullWidth"]})),K({section:M,className:Z,style:Xe,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),K({section:U,className:ce,style:A,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),K({section:$,className:he,style:_,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},vo=Pr(yo);import Bt,{forwardRef as wo,memo as Ro,useCallback as It,useContext as bo,useImperativeHandle as Eo,useRef as Ot}from"react";import{TabGuardClassNames as Wt,TabGuardCtrl as Po}from"ag-grid-community";var So=(e,t)=>{const{children:s,eFocusableElement:r,onTabKeyDown:n,gridCtrl:i,forceFocusOutWhenTabGuardsAreEmpty:o,isEmpty:c}=e,{context:a}=bo(q),d=Ot(null),l=Ot(null),w=Ot(),y=u=>{const S=u==null?void 0:parseInt(u,10).toString();for(const I of[d,l])S===void 0?I.current?.removeAttribute("tabindex"):I.current?.setAttribute("tabindex",S)};Eo(t,()=>({forceFocusOutOfContainer(u){w.current?.forceFocusOutOfContainer(u)}}));const h=It(()=>{const u=d.current,S=l.current;if(!u&&!S||a.isDestroyed()){w.current=a.destroyBean(w.current);return}if(u&&S){const I={setTabIndex:y};w.current=a.createBean(new Po({comp:I,eTopGuard:u,eBottomGuard:S,eFocusableElement:r,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:R=>i.focusInnerElement(R),isEmpty:c}))}},[]),P=It(u=>{d.current=u,h()},[h]),C=It(u=>{l.current=u,h()},[h]),f=u=>{const S=u==="top"?Wt.TAB_GUARD_TOP:Wt.TAB_GUARD_BOTTOM;return Bt.createElement("div",{className:`${Wt.TAB_GUARD} ${S}`,role:"presentation",ref:u==="top"?P:C})};return Bt.createElement(Bt.Fragment,null,f("top"),s,f("bottom"))},ko=wo(So),Fo=Ro(ko),Mo=({context:e})=>{const[t,s]=Ee(""),[r,n]=Ee(""),[i,o]=Ee(null),[c,a]=Ee(null),[d,l]=Ee(!1),[w,y]=Ee(),h=Be(),P=Be(null),C=Be(),[f,u]=Ee(null),S=Be(()=>{}),I=Be(),R=Be([]),m=ut(()=>{},[]);ke(" AG Grid ",P);const W=ut(v=>{if(P.current=v,h.current=v?e.createBean(new Er):e.destroyBean(h.current),!v||e.isDestroyed())return;const G=h.current;S.current=G.focusInnerElement.bind(G);const V={destroyGridUi:()=>{},setRtlClass:s,forceFocusOutOfContainer:p=>{if(!p&&I.current?.isDisplayed()){I.current.forceFocusOutOfContainer(p);return}C.current?.forceFocusOutOfContainer(p)},updateLayoutClasses:n,getFocusableContainers:()=>{const p=[],B=P.current?.querySelector(".ag-root");B&&p.push({getGui:()=>B});for(const N of R.current)N.isDisplayed()&&p.push(N);return p},setCursor:o,setUserSelect:a};G.setComp(V,v,v),l(!0)},[]);br(()=>{const v=h.current,G=P.current;if(!w||!v||!f||!G||e.isDestroyed())return;const V=[],{watermarkSelector:p,paginationSelector:B,sideBarSelector:N,statusBarSelector:k,gridHeaderDropZonesSelector:H}=v.getOptionalSelectors(),M=[];if(H){const x=e.createBean(new H.component),T=x.getGui();G.insertAdjacentElement("afterbegin",T),M.push(T),V.push(x)}if(N){const x=e.createBean(new N.component),T=x.getGui(),$=f.querySelector(".ag-tab-guard-bottom");$&&($.insertAdjacentElement("beforebegin",T),M.push(T)),V.push(x),R.current.push(x)}const U=x=>{const T=e.createBean(new x),$=T.getGui();return G.insertAdjacentElement("beforeend",$),M.push($),V.push(T),T};if(k&&U(k.component),B){const x=U(B.component);I.current=x,R.current.push(x)}return p&&U(p.component),()=>{e.destroyBeans(V);for(const x of M)x.remove()}},[w,f,e]);const b=St(()=>re("ag-root-wrapper",t,r),[t,r]),O=St(()=>re("ag-root-wrapper-body","ag-focus-managed",r),[r]),D=St(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:i??""}),[c,i]),F=ut(v=>{C.current=v,y(v!==null)},[]),g=ut(()=>!h.current?.isFocusable(),[]);return Ke.createElement("div",{ref:W,className:b,style:D,role:"presentation"},Ke.createElement("div",{className:O,ref:u,role:"presentation"},d&&f&&!e.isDestroyed()&&Ke.createElement(q.Provider,{value:e.getBeans()},Ke.createElement(Fo,{ref:F,eFocusableElement:f,onTabKeyDown:m,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:g},Ke.createElement(vo,null)))))},xo=Rr(Mo);import{BeanStub as Ao}from"ag-grid-community";var Go=class extends Ao{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}};import{useEffect as Do,useLayoutEffect as Bo}from"react";var Io=typeof window>"u"?Do:Bo,hs={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Oo={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...hs},fs=new Set(Object.keys(Oo)),Wo=new Set(Object.keys(hs)),Cs=e=>{const t=yt(Et),s=yt(Pt),r=se(),n=se(null),i=se(null),o=se([]),c=se([]),a=se(e),d=se(),l=se(),w=se(!1),[y,h]=Ae(void 0),[,P]=Ae(0),C=se(),f=m=>{const W=n.current?.classList,b=(O="")=>O.trim().split(/\s+/g).filter(Boolean);if(C.current!==m){for(const O of b(C.current))W?.contains(O)&&W.remove(O);for(const O of b(m))W?.contains(O)||W?.add(O);C.current=m}};Io(()=>{f(e.className)},[e.className]);const u=et(m=>{if(n.current=m,f(e.className),!m){for(const p of o.current)p();o.current.length=0;return}const W=[...e.modules??[],...t??[]];s&&Ms(W)?.setLicenseKey(s),i.current||(i.current=new vr(()=>P(p=>p+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{i.current?.destroy(),i.current=null}));const b=Fs(e.gridOptions,e,Object.keys(e).filter(p=>!fs.has(p))),O=()=>{if(w.current){const p=()=>d.current?.shouldQueueUpdates()?void 0:c.current.shift();let B=p();for(;B;)B(),B=p()}},D=new Uo(O);d.current=D;const F=new Go,g={providedBeanInstances:{frameworkCompWrapper:new No(i.current,b),renderStatus:F},modules:W,frameworkOverrides:D,setThemeOnGridDiv:!0},v=p=>{h(p),p.createBean(F),o.current.push(()=>{p.destroy()}),p.getBean("ctrlsSvc").whenReady({addDestroyFunc:B=>{o.current.push(B)}},()=>{if(p.isDestroyed())return;const B=r.current;B&&e.passGridApi?.(B)})},G=p=>{p.getBean("ctrlsSvc").whenReady({addDestroyFunc:B=>{o.current.push(B)}},()=>{for(const B of c.current)B();c.current.length=0,w.current=!0})},V=new Ss;b.gridId??(b.gridId=l.current),r.current=V.create(m,b,v,G,g),o.current.push(()=>{r.current=void 0}),r.current&&(l.current=r.current.getGridId())},[]),S=tt(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),I=et(m=>{w.current&&!d.current?.shouldQueueUpdates()?m():c.current.push(m)},[]);bs(()=>{const m=To(a.current,e);a.current=e,I(()=>{r.current&&Bs(m,r.current)})},[e]);const R=!xe.useSyncExternalStore||st(e,"renderingMode")==="legacy"?"legacy":"default";return xe.createElement("div",{style:S,ref:u},xe.createElement(Ut.Provider,{value:R},y&&!y.isDestroyed()?xe.createElement(xo,{key:y.instanceId,context:y}):null,i.current?.getPortals()??null))};function To(e,t){const s={};for(const r of Object.keys(t)){if(fs.has(r)){Wo.has(r)&&Nt(274,{prop:r});continue}const n=t[r];e[r]!==n&&(s[r]=n)}return s}var No=class extends Ps{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const s=this.gridOptions;if(st(s,"reactiveCustomComponents")){const o=(c=>{switch(c){case"filter":return st(s,"enableFilterHandlers")?ar:nr;case"floatingFilterComponent":return st(s,"enableFilterHandlers")?ur:lr;case"dateComponent":return sr;case"dragAndDropImageComponent":return rr;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return tr;case"statusPanel":return mr;case"toolPanel":return hr;case"menuItem":return pr;case"cellRenderer":return er;case"innerHeaderComponent":return dr}})(t.name);if(o)return new o(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":it();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new $t(e,this.parent,t,n)}},Ho=Rs((e,t)=>{const s=yt(q),{registry:r,context:n,gos:i,rowModel:o}=s,[c,a]=Ae(()=>new ne),[d,l]=Ae(()=>new ne),[w,y]=Ae(),[h,P]=Ae(),C=se(),f=se(null),u=se(),S=tt(()=>xs(e.api.getGridId(),w?.rowModelType??"clientSide"),[e]),I=tt(()=>c.toString()+" ag-details-row",[c]),R=tt(()=>d.toString()+" ag-details-grid",[d]);t&&Es(t,()=>({refresh(){return C.current?.refresh()??!1}})),e.template&&Nt(230);const m=et(b=>{if(f.current=b,!b||n.isDestroyed()){C.current=n.destroyBean(C.current),u.current?.();return}const O={toggleCss:(F,g)=>a(v=>v.setClass(F,g)),toggleDetailGridCss:(F,g)=>l(v=>v.setClass(F,g)),setDetailGrid:F=>y(F),setRowData:F=>P(F),getGui:()=>f.current},D=r.createDynamicBean("detailCellRendererCtrl",!0);if(D&&(n.createBean(D),D.init(O,e),C.current=D,i.get("detailRowAutoHeight"))){const F=()=>{if(f.current==null)return;const g=f.current.clientHeight;g!=null&&g>0&&setTimeout(()=>{e.node.setRowHeight(g),(As(i,o)||Gs(i,o))&&o.onRowHeightChanged()},0)};u.current=Ds(s,b,F),F()}},[]),W=et(b=>{C.current?.registerDetailWithMaster(b)},[]);return xe.createElement("div",{className:I,ref:m},w&&xe.createElement(Cs,{className:R,...w,modules:S,rowData:h,passGridApi:W}))}),Uo=class extends ks{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:zt,agGroupRowRenderer:zt,agDetailCellRenderer:Ho},this.wrapIncoming=(t,s)=>s==="ensureVisible"?Ls(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return _s()}},_o=class extends ws{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return vs.createElement(Cs,{...this.props,passGridApi:this.setGridApi})}};import{useContext as Lo}from"react";function Ue(e){const{setMethods:t}=Lo(je);t(e)}function Vo(e){Ue(e)}function zo(e){return Ue(e)}function jo(e){return Ue(e)}function Ko(e){return Ue(e)}function $o(e){Ue(e)}function Jo(e){Ue(e)}export{wr as AgGridProvider,_o as AgGridReact,je as CustomComponentContext,gr as getInstance,Vo as useGridCellEditor,zo as useGridDate,jo as useGridFilter,Ko as useGridFilterDisplay,$o as useGridFloatingFilter,Jo as useGridMenuItem,it as warnReactiveCustomComponents};
